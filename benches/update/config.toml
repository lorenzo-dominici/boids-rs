# =============================================================================
# Benchmark Configuration
# =============================================================================
# This configuration file defines parameters for the boids update benchmarks.
# Benchmarks compare sequential vs parallel execution with AoS vs SoA layouts.
# =============================================================================

# Thread counts to benchmark (parallel execution)
threads = [1, 2, 4, 8, 16, 32, 64]

# Multipliers for base boid counts (scales the 'boids' value in each flock)
# Final count = sum of (flock.boids * multiplier) for all flocks
dim_multipliers = [256, 512, 1024, 2048]

# Legacy parameters (kept for compatibility)
env_size = 100.0
turnback = 0.25

# =============================================================================
# Mesh Environment Configuration
# =============================================================================
[environment]
path = "examples/rerun/assets/room.obj"  # Path to mesh file (OBJ or STL)
inverted = true                          # true = boids inside mesh
scale = 1.0                              # Mesh scale factor

# APF Repulsion Parameters
repulsion_strength = 1.5                 # Base repulsion force strength
falloff_exponent = 2.0                   # Distance falloff steepness
weight_exponent = 2.0                    # Multi-triangle weighting
size_margin = 0.5                        # Safety margin for corrections

# =============================================================================
# Flock Definitions (Base boid counts - multiplied by dim_multipliers)
# =============================================================================
[[flocks]]
flock.name = "F1"
flock.kind.kind = "Alpha"
flock.kind.size = 3.0
flock.kind.color = [255, 0, 0]
flock.kind.preys = ["Alpha", "Beta"]
flock.kind.predators = ["Alpha"]
flock.kind.speed.min = 1.0
flock.kind.speed.max = 2.0
flock.kind.angular_speed.min = 0.0
flock.kind.angular_speed.max = 0.025
flock.kind.acceleration.min = -0.1
flock.kind.acceleration.max = 0.1
flock.kind.momentum = 0.75
flock.kind.vision.min = 0.0
flock.kind.vision.max = 60.0
flock.kind.protected.min = 0.0
flock.kind.protected.max = 30.0
flock.kind.sep_weight = 0.05
flock.kind.align_weight = 0.05
flock.kind.coh_weight = 0.05
boids = 2
state.min = 0.75
state.max = 1.0
biases = []

[[flocks.spawns]]
position = [0.0, 0.0, 0.0]
radius = 40.0

[[flocks]]
flock.name = "F2"
flock.kind.kind = "Beta"
flock.kind.size = 2.0
flock.kind.color = [0, 255, 0]
flock.kind.preys = ["Gamma"]
flock.kind.predators = ["Alpha"]
flock.kind.speed.min = 1.0
flock.kind.speed.max = 2.5
flock.kind.angular_speed.min = 0.0
flock.kind.angular_speed.max = 0.05
flock.kind.acceleration.min = -0.2
flock.kind.acceleration.max = 0.2
flock.kind.momentum = 0.5
flock.kind.vision.min = 0.0
flock.kind.vision.max = 40.0
flock.kind.protected.min = 0.0
flock.kind.protected.max = 20.0
flock.kind.sep_weight = 0.05
flock.kind.align_weight = 0.05
flock.kind.coh_weight = 0.05
boids = 4
state.min = 0.5
state.max = 1.0
biases = []

[[flocks.spawns]]
position = [0.0, 0.0, 0.0]
radius = 40.0

[[flocks]]
flock.name = "F3"
flock.kind.kind = "Gamma"
flock.kind.size = 1.0
flock.kind.color = [0, 0, 255]
flock.kind.preys = []
flock.kind.predators = ["Beta"]
flock.kind.speed.min = 1.0
flock.kind.speed.max = 3.0
flock.kind.angular_speed.min = 0.0
flock.kind.angular_speed.max = 0.075
flock.kind.acceleration.min = -0.2
flock.kind.acceleration.max = 0.2
flock.kind.momentum = 0.25
flock.kind.vision.min = 0.0
flock.kind.vision.max = 20.0
flock.kind.protected.min = 0.0
flock.kind.protected.max = 10.0
flock.kind.sep_weight = 0.05
flock.kind.align_weight = 0.05
flock.kind.coh_weight = 0.05
boids = 5
state.min = 0.25
state.max = 1.0

[[flocks.spawns]]
position = [0.0, 0.0, 0.0]
radius = 40.0

[[flocks.biases]]
position = [0.0, 0.0, 0.0]
weight_range = { min = 0.00025, max = 0.0005 }
prob = 0.25

[[flocks]]
flock.name = "F4"
flock.kind.kind = "Gamma"
flock.kind.size = 1.0
flock.kind.color = [0, 0, 255]
flock.kind.preys = []
flock.kind.predators = ["Beta"]
flock.kind.speed.min = 1.0
flock.kind.speed.max = 3.0
flock.kind.angular_speed.min = 0.0
flock.kind.angular_speed.max = 0.075
flock.kind.acceleration.min = -0.2
flock.kind.acceleration.max = 0.2
flock.kind.momentum = 0.25
flock.kind.vision.min = 0.0
flock.kind.vision.max = 20.0
flock.kind.protected.min = 0.0
flock.kind.protected.max = 10.0
flock.kind.sep_weight = 0.05
flock.kind.align_weight = 0.05
flock.kind.coh_weight = 0.05
boids = 5
state.min = 0.25
state.max = 1.0

[[flocks.spawns]]
position = [0.0, 0.0, 0.0]
radius = 40.0

[[flocks.biases]]
position = [0.0, 0.0, 0.0]
weight_range = { min = 0.00025, max = 0.0005 }
prob = 0.25